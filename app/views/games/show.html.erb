<div class="content">

	<div class="game-header">
		<h1><%= @game.name %></h1>
		<div class="description"><%= @game.description %></div>
		
		<!-- Menu where you can view/invite/kick players from your game -->
		<div class="players-manager">Players</div>
	</div> <!-- .game-header -->

	<div class="game-content">
	
		<!-- GMs game menu -->
		<div class="gm-container">
			<div class="gm-menu">
				<input type="text">
				<div class="gm-add-category">Add category</div>
				<div class="gm-add-item">Add item</div>
			</div> <!-- .gm-menu -->
			
			<ul class="gm-game-categories<%= " empty" if @game.game_categories.empty? %>">
			<%= "No categories" if @game.game_categories.empty? %>
			
			<% @game.game_categories.each do |category| %>
			<li>
				<ul class="category" id="category-<%= category.id %>">
					<div class="category-title"><%= category.name %></div>
					
					<li class="category-items sortable<%= " empty" if category.gm_items.empty? %>">
					<% if category.gm_items.empty? %>
					   <p>Empty</p>
					<% else %>
    					<% category.gm_items.each do |item| %>
    						<div class="category-item item" id="item-<%= item.id %>">
    							<div class="item-name"><%= item.name %></div>
    							<div class="item-menu">Edit Delete</div>
    						</div> <!-- .category-item .item -->
    					<% end %>
					<% end %>
					
					</li> <!-- .category-items -->
				</ul> <!-- .category -->
			</li>
			<% end %>
			
			</ul> <!-- .gm-game-categories -->
			
		</div> <!-- .gm-container -->
		
		<!-- Players inventory -->
		<div class="inventory-container">
			<div class="inventory-identify">Identify</div>
			
			<div class="inventory<%= " empty" if @game.players.empty? %>">
			<%= "No players" if @game.players.empty? %>
				
			<% @game.players.each do |player| %>
				<div class="inventory-player" id="player-<%= player.id %>">
					<div class="player-name"><%= player.name %></div>
					
					<ul class="inventory-items sortable<%= " empty" if player.items_in(@game) %>">
					<% if player.items_in(@game).empty? %>
					<p>Empty</p>
					<% else %>
					<li>
    					<% player.items_in(@game).each do |item| %>
    						<div class="inventory-item item " id="item-<%= item.id %>>
    							<div class="item-name"><%= item.name %></div>
    							<div class="item-menu">Edit Delete</div>
    						</div> <!-- .inventory-item .item -->
    					<% end %>
					</li>
    				<% end %>
					</ul> <!-- .inventory-items -->
					
				</div> <!-- .inventory-player -->
			<% end %>
		
			</div> <!-- .inventory -->
		
		</div> <!-- .inventory-container -->
	
	</div>

</div> <!-- .content -->

<script>
    function update(newCategory, itemId) {
        var url = "<%= url_for(update_category_in_item_path('newCategory', 'itemId')) %>";
        url = url.replace("newCategory", newCategory).replace("itemId", itemId);
        
        $.ajax({
               type: "POST",
               url: url,
           })
    }
</script>
